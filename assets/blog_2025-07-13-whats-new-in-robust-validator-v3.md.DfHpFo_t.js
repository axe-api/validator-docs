import{_ as a,c as i,ag as e,o as t}from"./chunks/framework.L8ryr_Zo.js";const c=JSON.parse('{"title":"What’s New in Robust Validator v3","description":"","frontmatter":{"sidebar":false,"editLink":false,"outline":false,"prev":false,"next":false},"headers":[],"relativePath":"blog/2025-07-13-whats-new-in-robust-validator-v3.md","filePath":"blog/2025-07-13-whats-new-in-robust-validator-v3.md"}'),n={name:"blog/2025-07-13-whats-new-in-robust-validator-v3.md"};function l(h,s,r,o,d,p){return t(),i("div",null,s[0]||(s[0]=[e(`<h1 id="what-s-new-in-robust-validator-v3" tabindex="-1">What’s New in Robust Validator v3 <a class="header-anchor" href="#what-s-new-in-robust-validator-v3" aria-label="Permalink to &quot;What’s New in Robust Validator v3&quot;">​</a></h1><h2 id="a-thoughtful-step-forward" tabindex="-1">A Thoughtful Step Forward <a class="header-anchor" href="#a-thoughtful-step-forward" aria-label="Permalink to &quot;A Thoughtful Step Forward&quot;">​</a></h2><p>I’ll be honest. I’m not a fan of major releases.</p><p>They often break things, demand extra effort from developers, and create friction in otherwise smooth projects. I try to avoid them whenever possible.</p><p>But this one had to happen.</p><p>Some internal rule definitions were structured in ways that caused subtle issues and made future flexibility harder. Fixing that meant breaking changes, even though the overall API remains very familiar.</p><p>The good news? The changes are minimal, and upgrading should be painless.</p><h2 id="tl-dr" tabindex="-1">TL;DR <a class="header-anchor" href="#tl-dr" aria-label="Permalink to &quot;TL;DR&quot;">​</a></h2><p>If you&#39;re upgrading to v3, here’s what you need to update:</p><p>Rename deprecated rule names:</p><p><code>in</code> → <code>includes</code></p><p><code>isIn</code> → <code>isIncludes</code></p><p>String rules: <code>in:admin,moderator</code> → <code>includes:admin,moderator</code></p><p>Do a find-and-replace in your rule definitions and imports. No major logic changes, just clearer names and reserved keyword fixes.</p><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Before</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { in, isIn } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;robust-validator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// After</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { includes, isIncludes } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;robust-validator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span></code></pre></div><div class="language-ts vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Before:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, { role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;in:admin,moderator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// After:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(data, { role: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;includes:admin,moderator&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span></code></pre></div><h2 id="what-went-wrong" tabindex="-1">What Went Wrong? <a class="header-anchor" href="#what-went-wrong" aria-label="Permalink to &quot;What Went Wrong?&quot;">​</a></h2><p>This release was sparked by a real-world issue flagged by someone (<a href="https://github.com/christoph-kluge" target="_blank" rel="noreferrer">@christoph-kluge</a>) using the library. We worked through it together, trying a few fixes along the way. But no matter how we patched things (<a href="https://github.com/axe-api/validator/pull/67" target="_blank" rel="noreferrer">#67</a>, <a href="https://github.com/axe-api/validator/issues/70" target="_blank" rel="noreferrer">#70</a>, <a href="https://github.com/axe-api/validator/pull/71" target="_blank" rel="noreferrer">#71</a>, <a href="https://github.com/axe-api/validator/issues/73" target="_blank" rel="noreferrer">#73</a>), the problem kept showing up.</p><p>Eventually, things got messy. Some of the rule names were using reserved JavaScript keywords. On top of that, the documentation didn’t reflect how those rules actually worked. That combination led to confusion, bugs, and edge cases that were hard to debug.</p><p>It wasn’t just a surface-level issue. That’s why this version exists.</p><h2 id="the-real-culprit-in" tabindex="-1">The Real Culprit: <code>in</code> <a class="header-anchor" href="#the-real-culprit-in" aria-label="Permalink to &quot;The Real Culprit: \`in\`&quot;">​</a></h2><p>The main problem came down to a poorly chosen rule name: <code>in</code>.</p><p>In earlier versions, the library exported both <code>in</code> and <code>isIn</code>. But they served different purposes:</p><p><code>in</code> was just a tiny helper that turned function-based rule definitions into string-based ones.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-EsTVI" id="tab-ftVxClN" checked><label data-title="in.ts" for="tab-ftVxClN">in.ts</label></div><div class="blocks"><div class="language-ts vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">items</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[])</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`includes:\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">items</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;,&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div></div></div><p><code>isIn</code> was the actual validation rule.</p><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-xrTrM" id="tab-saxFL3c" checked><label data-title="isIn.ts" for="tab-saxFL3c">isIn.ts</label></div><div class="blocks"><div class="language-ts vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">ts</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> unknown</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">options</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> boolean</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // validation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">};</span></span></code></pre></div><div class="vp-code-group vp-adaptive-theme"><div class="tabs"></div><div class="blocks"><p>The issue? <code>in</code> is a <strong>reserved keyword in JavaScript</strong>. While technically allowed in some contexts, using it as a named export created all kinds of unexpected behavior.</p><p>To make things worse, the documentation didn’t clearly explain the difference between <code>in</code> and <code>isIn</code>.</p><h2 id="a-clean-rename-includes-instead-of-in" tabindex="-1">A Clean Rename: <code>includes</code> Instead of <code>in</code> <a class="header-anchor" href="#a-clean-rename-includes-instead-of-in" aria-label="Permalink to &quot;A Clean Rename: \`includes\` Instead of \`in\`&quot;">​</a></h2><p>To fix the issue without introducing more confusion, I’ve renamed the affected rule and helper functions.</p><p>Here’s what changed:</p><ul><li><code>in</code> → <code>includes</code></li><li><code>isIn</code> → <code>isIncludes</code></li><li>String rule format: <code>in:admin,moderator</code> → <code>includes:admin,moderator</code></li></ul><p>The new name avoids conflicts with JavaScript keywords and better reflects what the rule actually does.</p><p>This is technically a breaking change, but it&#39;s easy to update. A simple find-and-replace in your rule definitions should do the trick.</p><h2 id="final-thoughts" tabindex="-1">Final Thoughts <a class="header-anchor" href="#final-thoughts" aria-label="Permalink to &quot;Final Thoughts&quot;">​</a></h2><p>Major releases are never easy, and I don’t take them lightly. But this one clears up some long-standing issues and makes the library more reliable moving forward.</p><p>If you&#39;re upgrading, the changes are small and straightforward. And as always, feel free to open a discussion or issue if you run into anything unexpected.</p><p>Thanks to everyone who’s been using Robust Validator, reporting bugs, and helping shape it into something better. Your feedback really matters.</p><p>Let’s keep it robust. 💛</p></div></div></div></div>`,27)]))}const u=a(n,[["render",l]]);export{c as __pageData,u as default};
